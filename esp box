local a=game.Players.LocalPlayer;local b=game:GetService("Workspace").CurrentCamera;local c=workspace.CurrentCamera;local d=c.worldToViewportPoint;local e=Vector3.new(0,0.5,0)local f=Vector3.new(0,3,0)for g,h in pairs(game.Players:GetChildren())do local i=Drawing.new("Square")i.Visible=false;i.Color=Color3.new(0,0,0)i.Thickness=3;i.Transparency=1;i.Filled=false;local j=Drawing.new("Square")j.Visible=false;j.Color=Color3.new(1,1,1)j.Thickness=1;j.Transparency=1;j.Filled=false;local k=Drawing.new("Square")k.Thickness=3;k.Filled=false;k.Color=Color3.new(0,0,0)k.Transparency=1;k.Visible=false;local l=Drawing.new("Square")l.Thickness=1;l.Filled=false;l.Transparency=1;l.Visible=false;function boxesp()game:GetService("RunService").RenderStepped:Connect(function()if h.Character~=nil and h.Character:FindFirstChild("Humanoid")~=nil and h.Character:FindFirstChild("HumanoidRootPart")~=nil and h~=a and h.Character.Humanoid.Health>0 then local m,n=b:worldToViewportPoint(h.Character.HumanoidRootPart.Position)local o=h.Character.HumanoidRootPart;local p=h.Character.Head;local q,r=d(c,o.Position)local s=d(c,p.Position+e)local t=d(c,o.Position-f)if n then i.Size=Vector2.new(1000/q.Z,s.Y-t.Y)i.Position=Vector2.new(q.X-i.Size.X/2,q.Y-i.Size.Y/2)i.Visible=true;j.Size=Vector2.new(1000/q.Z,s.Y-t.Y)j.Position=Vector2.new(q.X-j.Size.X/2,q.Y-j.Size.Y/2)j.Visible=true;k.Size=Vector2.new(2,s.Y-t.Y)k.Position=i.Position-Vector2.new(6,0)k.Visible=true;l.Size=Vector2.new(2,(s.Y-t.Y)/(game:GetService("Players")[h.Character.Name].NRPBS["MaxHealth"].Value/math.clamp(game:GetService("Players")[h.Character.Name].NRPBS["Health"].Value,0,game:GetService("Players")[h.Character.Name].NRPBS:WaitForChild("MaxHealth").Value)))l.Position=Vector2.new(j.Position.X-6,j.Position.Y+1/l.Size.Y)l.Color=Color3.fromRGB(255-255/(game:GetService("Players")[h.Character.Name].NRPBS["MaxHealth"].Value/game:GetService("Players")[h.Character.Name].NRPBS["Health"].Value),255/(game:GetService("Players")[h.Character.Name].NRPBS["MaxHealth"].Value/game:GetService("Players")[h.Character.Name].NRPBS["Health"].Value),0)l.Visible=true;if h.TeamColor==a.TeamColor then i.Visible=false;j.Visible=false;k.Visible=false;l.Visible=false else i.Visible=true;j.Visible=true;k.Visible=true;l.Visible=true end else i.Visible=false;j.Visible=false;k.Visible=false;l.Visible=false end else i.Visible=false;j.Visible=false;k.Visible=false;l.Visible=false end end)end;coroutine.wrap(boxesp)()end;game.Players.PlayerAdded:Connect(function(h)local i=Drawing.new("Square")i.Visible=false;i.Color=Color3.new(0,0,0)i.Thickness=3;i.Transparency=1;i.Filled=false;local j=Drawing.new("Square")j.Visible=false;j.Color=Color3.new(1,1,1)j.Thickness=1;j.Transparency=1;j.Filled=false;local k=Drawing.new("Square")k.Thickness=3;k.Filled=false;k.Color=Color3.new(0,0,0)k.Transparency=1;k.Visible=false;local l=Drawing.new("Square")l.Thickness=1;l.Filled=false;l.Transparency=1;l.Visible=false;function boxesp()game:GetService("RunService").RenderStepped:Connect(function()if h.Character~=nil and h.Character:FindFirstChild("Humanoid")~=nil and h.Character:FindFirstChild("HumanoidRootPart")~=nil and h~=a and h.Character.Humanoid.Health>0 then local m,n=b:worldToViewportPoint(h.Character.HumanoidRootPart.Position)local o=h.Character.HumanoidRootPart;local p=h.Character.Head;local q,r=d(c,o.Position)local s=d(c,p.Position+e)local t=d(c,o.Position-f)if n then i.Size=Vector2.new(1000/q.Z,s.Y-t.Y)i.Position=Vector2.new(q.X-i.Size.X/2,q.Y-i.Size.Y/2)i.Visible=true;j.Size=Vector2.new(1000/q.Z,s.Y-t.Y)j.Position=Vector2.new(q.X-j.Size.X/2,q.Y-j.Size.Y/2)j.Visible=true;k.Size=Vector2.new(2,s.Y-t.Y)k.Position=i.Position-Vector2.new(6,0)k.Visible=true;l.Size=Vector2.new(2,(s.Y-t.Y)/(game:GetService("Players")[h.Character.Name].NRPBS["MaxHealth"].Value/math.clamp(game:GetService("Players")[h.Character.Name].NRPBS["Health"].Value,0,game:GetService("Players")[h.Character.Name].NRPBS:WaitForChild("MaxHealth").Value)))l.Position=Vector2.new(j.Position.X-6,j.Position.Y+1/l.Size.Y)l.Color=Color3.fromRGB(255-255/(game:GetService("Players")[h.Character.Name].NRPBS["MaxHealth"].Value/game:GetService("Players")[h.Character.Name].NRPBS["Health"].Value),255/(game:GetService("Players")[h.Character.Name].NRPBS["MaxHealth"].Value/game:GetService("Players")[h.Character.Name].NRPBS["Health"].Value),0)l.Visible=true;if h.TeamColor==a.TeamColor then i.Visible=false;j.Visible=false;k.Visible=false;l.Visible=false else i.Visible=true;j.Visible=true;k.Visible=true;l.Visible=true end else i.Visible=false;j.Visible=false;k.Visible=false;l.Visible=false end else i.Visible=false;j.Visible=false;k.Visible=false;l.Visible=false end end)end;coroutine.wrap(boxesp)()end)
